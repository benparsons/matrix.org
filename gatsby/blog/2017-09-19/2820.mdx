---
date: '2017-09-19'
title: Matrix & Riot for Cryptocurrency Communities
categories:
  - Thoughts
author: Matthew Hodgson
---

<span style="font-weight: 400;">Hi folks,</span>

<span style="font-weight: 400;">Over the last few weeks there's been a huge movement in the cryptocurrency communities over needing to find a better communication medium than Slack.  Some of the biggest communities for projects like </span><a href="https://status.im"><span style="font-weight: 400;">Status</span></a><span style="font-weight: 400;">, </span><a href="https://aragon.one"><span style="font-weight: 400;">Aragon</span></a><span style="font-weight: 400;">, </span><a href="http://www.tenx.tech/"><span style="font-weight: 400;">TenX</span></a><span style="font-weight: 400;">, </span><a href="https://www.tezos.com/"><span style="font-weight: 400;">Tezos</span></a><span style="font-weight: 400;">, </span><span style="font-weight: 400;"><a href="https://omg.omise.co/">OmiseGo</a>, <a href="http://polkadot.network">Polkadot</a></span><span style="font-weight: 400;"> and many others are getting overrun by phishing attacks where malicious users have set up bots which auto-DM users joining the room in order to try to extract private keys to steal funds.  Slack has very limited support for avoiding this sort of abuse (especially at the free service tiers), so the </span><a href="https://github.com/aragon/governance/issues/7"><span style="font-weight: 400;">search is on</span></a><span style="font-weight: 400;"> for an alternative solution.  There seems to be some confusion over what Matrix &amp; Riot can and can't do to help the situation, so we thought we'd write a blog post about it (especially after we </span><a href="http://www.trustnodes.com/2017/09/14/matrix-demo-steals-show-ethereum-london-conference-meetup"><span style="font-weight: 400;">had so much fun</span></a><span style="font-weight: 400;"> at the ETHLDN meetup last week!).</span>

<span style="font-weight: 400;">To be clear: we see Ethereum, Bitcoin, Ripple, Stellar and all the other decentralised currencies as being very closely related to Matrix.  Just as distributed ledgers disrupt the fragmented oligopoly old-school banking industry, we want Matrix to disrupt the relatively old-school communications systems of today. And so we'd really rather like that Matrix and Riot rocked when it comes to supporting cryptocurrency communities, and this is something we intend to dedicate resources to long term: we've got some big plans.</span>
<h3><span style="font-weight: 400;">Things Matrix provides:</span></h3>
<b>Decentralisation</b><span style="font-weight: 400;">. Rather than each community having its own silo, with users having to juggle accounts over all of them, Matrix decentralises rooms over all the different servers. Users can have a single account and still jump into all the other communities (as well as the rest of the Matrix universe). However, each community can run its own server instance (if they want to) and have complete control over its behaviour.</span>

<b>Encryption</b><span style="font-weight: 400;">. Matrix has </span><a href="https://matrix.org/blog/2016/11/21/matrixs-olm-end-to-end-encryption-security-assessment-released-and-implemented-cross-platform-on-riot-at-last/"><span style="font-weight: 400;">first-class end-to-end encryption</span></a><span style="font-weight: 400;"> (although the UX in Riot needs refinement and is technically still beta).  This is great for encrypting rooms which need privacy - although it does come at the expense of being able to do server-side content filtering, which is desirable for fixing phishing attacks. So you probably don't want to turn on encryption for rooms which need phish filtering (or you could use a bot to decrypt and autoremove malicious content).</span>

<b>A standard real-time API. </b><span style="font-weight: 400;">One bit of feedback we've heard recently is that “Riot has no realtime API”.  This is spectacularly untrue; Riot is a client for the Matrix protocol, which is in and of itself an open standard realtime API for messaging, which you can use for writing whatever bots and extensions your heart desires.</span>

<b>Finely grained permissions per room. </b><span style="font-weight: 400;">Likewise there seems to be some confusion over Matrix's access control model.  In Matrix, each user in a room has a ‘power level' - typically a number between 0 and 100.  By convention, normal users who have just joined the room have 0; the room creator and ‘admins' have 100; and ‘moderators' have 50.  Pretty much every access you can do in a room then has a threshold which defines how much power a user needs to perform the action.  It doesn't get much more finely grained than this!</span>

<b>Ability to disable DMs and room invites. </b><span style="font-weight: 400;">Architecturally Matrix lets you prevent users who use a given server from receiving invites (the homeserver can just autoreject the invites, based on some set of rules). <del></del> <del>We're currently putting together a quick demo to show this off in the Synapse server implementation, but it boils down to having an option to cancel invites <a href="https://github.com/matrix-org/synapse/blob/5a7f561a9bff5163ce7fce719eea083cdd0eabd9/synapse/handlers/federation.py#L1066"><span style="font-weight: 400;">here</span></a><span style="font-weight: 400;"> (federated) and </span><a href="https://github.com/matrix-org/synapse/blob/e5ae386ea4112ec91b47de339a3c8a4e034898c0/synapse/handlers/room_member.py#L243"><span style="font-weight: 400;">here</span></a><span style="font-weight: 400;"> (local).</span></del></span> Check out the demo below!

<b>Ability to filter content.</b><span style="font-weight: 400;"> Similarly, Matrix architecturally lets a given server filter out messages based on content or some other pattern from being received by its users. <del> We're also putting together a demo of this too in Synapse, which boils down to redacting inappropriate events <a href="https://github.com/matrix-org/synapse/blob/e5ae386ea4112ec91b47de339a3c8a4e034898c0/synapse/federation/federation_base.py#L119"><span style="font-weight: 400;">here</span></a><span style="font-weight: 400;"> (federated) and </span><a href="https://github.com/matrix-org/synapse/blob/e5ae386ea4112ec91b47de339a3c8a4e034898c0/synapse/handlers/message.py#L239"><span style="font-weight: 400;">here</span></a><span style="font-weight: 400;"> (local).  The demo isn't quite ready yet but we'll update this &amp; yell when it is.</span></del></span> Check out the demo below!
<p style="margin-left: 30px; font-size: 16px;"><span style="color: #ff6600;"><strong>UPDATE</strong></span> - the <a href="https://github.com/matrix-org/synapse/pull/2457">DM/invite disabling</a> and <a href="https://github.com/matrix-org/synapse/pull/2456">spam/phish filtering</a> code has now landed on the develop branch of Synapse, and we've deployed an demo example of it at <a href="https://phishfree.riot.im">https://phishfree.riot.im</a>.  Messages containing the word 'SPAM' are filtered, and invites are disabled (unless you are the local server admin).</p>
<b>Other stuff. </b><span style="font-weight: 400;">Matrix and Riot give loads of other fun stuff too:</span>
<ul>
 	<li style="font-weight: 400;"><span style="font-weight: 400;">Widgets - the ability to embed arbitrary apps into your rooms (video conferences; currency tickers; DApps; wallets; monitoring dashboards; etc.).</span></li>
 	<li style="font-weight: 400;"><span style="font-weight: 400;">100% Native clients on iOS &amp; Android (including Jitsi video conferencing &amp; Widgets, as of the develop branch!)</span></li>
 	<li style="font-weight: 400;"><span style="font-weight: 400;">Read receipts! (how can you live without them on Slack?!)</span></li>
 	<li style="font-weight: 400;"><span style="font-weight: 400;">Internationalised to 20+ languages (thanks to the community! :)</span></li>
 	<li style="font-weight: 400;"><a href="https://matrix.org/blog/2017/03/11/how-do-i-bridge-thee-let-me-count-the-ways/"><span style="font-weight: 400;">Bridges</span></a><span style="font-weight: 400;"> through to IRC, Slack, Gitter, and more.</span></li>
 	<li style="font-weight: 400;"><span style="font-weight: 400;">All sorts of alternative clients (e.g. </span><a href="https://github.com/mujx/nheko"><span style="font-weight: 400;">nheko</span></a><span style="font-weight: 400;">, </span><a href="https://github.com/QMatrixClient/Quaternion"><span style="font-weight: 400;">quaternion</span></a><span style="font-weight: 400;">) and </span><a href="https://matrix.org/docs/projects/try-matrix-now.html"><span style="font-weight: 400;">SDKs</span></a></li>
 	<li style="font-weight: 400;"><span style="font-weight: 400;">Insanely scalable and performant next-generation server (</span><a href="https://github.com/matrix-org/dendrite"><span style="font-weight: 400;">Dendrite</span></a><span style="font-weight: 400;">) on the horizon</span></li>
 	<li style="font-weight: 400;"><span style="font-weight: 400;">An </span><a href="https://matrix.org/docs/spec"><span style="font-weight: 400;">open spec</span></a><span style="font-weight: 400;"> for the protocol.</span></li>
 	<li style="font-weight: 400;"><span style="font-weight: 400;">100% Apache-licensed FLOSS.  Riot/Web is particularly easy to hack on and theme &amp; customise as needed.</span></li>
 	<li style="font-weight: 400;"><span style="font-weight: 400;">Ability to disable federation for a room if you really want to lock it down to the users &amp; rules of a single server.</span></li>
</ul>
<h3><span style="font-weight: 400;">Things we need to improve:</span></h3>
<b>Groups (aka Communities):  </b><span style="font-weight: 400;">One of the biggest missing features in Matrix is the ability to define groups of users &amp; rooms, similar to a Slack team or Discord server, which can be used to organise together a set of discussions and generally give a feeling of community.  We've been working hard at this and expect to see it land in Riot/Web in the next few weeks.  In the meanwhile, you can see some of the UX we're aiming for </span><a href="https://docs.google.com/document/d/1wv78GqgG59CLjIKPi7GGkdqI6KOeQUBl9Bnf-uA-Kc0/edit#heading=h.xravd1v7n60m"><span style="font-weight: 400;">here</span></a><span style="font-weight: 400;">!</span>

<b>E2E UX (and Riot UX in general):  </b><span style="font-weight: 400;">While the underlying encryption of Matrix is solid, the UX exposed by Riot needs considerable work - specifically to improve the device verification flow and automatically share keys between trusted devices.  We're continuing to work on this over the next few months.  Likewise there are </span><a href="https://github.com/vector-im/riot-web/issues/2984"><span style="font-weight: 400;">many areas</span></a><span style="font-weight: 400;"> for possible improvement in Riot's overall UX and design that we're working through as urgently as we can.</span>

<b>Active Application Services</b><span style="font-weight: 400;">: The per-server filtering described above is good if you just want to protect users on a given server (e.g. the server you point your community at).  However, if you want to filter all the messages for a given room which may be federated over multiple servers, you need a way to define a centralised chokepoint to define the filtering rules.  Architecturally this is meant to be performed by an ‘Active Application Service' in Matrix, but we've not yet defined or implemented this API.  The idea for the room to define a list of services that messages are filtered through by all servers before they may be accepted for the room.  This would be the ideal solution to the phishing-filtering problem, but in practice filtering just local users (and perhaps disabling federation for particularly sensitive rooms or servers) is probably good enough for the immediate problem here.</span>

<span style="font-weight: 400;">Hope this provides some much-needed clarity to the debate! If there are other features cryptocurrency communities need to thrive please let us know, as we'd like to actively help to support decentralized communities.  </span><a href="https://matrix.to/#/#matrix-dev:matrix.org"><span style="font-weight: 400;">#matrix-dev:matrix.org</span></a><span style="font-weight: 400;"> is probably the best place for further questions :)</span>

<span style="font-weight: 400;">Finally: one thing that has come up a few times in this discussion has been “Matrix's funding crisis means they may not be here to stay”.  All I can say is that </span><b>Matrix is here to stay</b><span style="font-weight: 400;">. Even if the core team ended up just being Matthew hacking away by himself funded by </span><a href="https://patreon.com/matrixdotorg"><span style="font-weight: 400;">Patreon</span></a><span style="font-weight: 400;">/</span><a href="https://liberapay.com/matrixdotorg"><span style="font-weight: 400;">Liberapay</span></a><span style="font-weight: 400;">, we have a large and passionate wider dev community who aren't going anywhere.  But more importantly (and not wishing to jinx it), in the last few weeks we have received offers of significant funding which may hopefully resolve the funding crisis for the foreseeable.  Nothing is signed yet, but watch this space, and meanwhile I strongly suggest betting on Matrix being here to stay!</span>

<span style="font-weight: 400;">--Matthew</span>